
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>More C0 &#8212; Principles of programming I: Imperative computation (forever alpha) documentation</title>
    
  <link href="_static/css/theme.css" rel="stylesheet" />
  <link href="_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    
  <link rel="preload" as="script" href="_static/js/index.1c5a1a01449ed65a7b51.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Arrays" href="arrays.html" />
    <link rel="prev" title="Reasoning with imperative programs" href="reasoning.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Principles of programming I: Imperative computation (forever alpha) documentation</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p class="caption">
 <span class="caption-text">
  Contents:
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="welcome.html">
   Welcome
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="intro.html">
   Introduction to imperative computation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="warmup.html">
   Warming up with the power function
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="reasoning.html">
   Reasoning with imperative programs
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   More C0
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="arrays.html">
   Arrays
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="gcd.html">
   Assignment 1: GCD
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="practice.html">
   Practice problems
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="searching.html">
   Searching
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="sorting.html">
   Sorting - an information theoretic introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="binsearch.html">
   Binary search
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="avl.html">
   AVL trees
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="lists.html">
   Linked lists
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="c.html">
   Transitioning to C
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/c0.rst.txt"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.rst</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#structures">
   Structures
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#indirection">
   Indirection
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#pointers-to-structures">
   Pointers to structures
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#arrays">
   Arrays
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#arrays-of-structs">
   Arrays of structs
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#combining-these-concepts">
   Combining these concepts
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#typedefs">
   Typedefs
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="more-c0">
<h1>More C0<a class="headerlink" href="#more-c0" title="Permalink to this headline">¶</a></h1>
<p>So far, we’ve only seen the <code class="docutils literal notranslate"><span class="pre">int</span></code> type in C0 and that it has a range of
<span class="math notranslate nohighlight">\([-2^{31},2^{31} - 1]\)</span>. There are few other basic data types that are
useful when writing programs. They are -</p>
<table class="colwidths-given table" id="id3">
<caption><span class="caption-number">Table 1 </span><span class="caption-text">Basic data types</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 13%" />
<col style="width: 63%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Type</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
<th class="head"><p><strong>Example</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p></td>
<td><p>A variable of this type can take on one of
two values – <code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">b</span> <span class="pre">=</span> <span class="pre">2</span> <span class="pre">&lt;</span> <span class="pre">3;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">char</span></code></p></td>
<td><p>Holds a single ASCII character, whose literals
are given enclosed in single quotes – like <code class="docutils literal notranslate"><span class="pre">'x'</span></code>.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">char</span> <span class="pre">ch</span> <span class="pre">=</span> <span class="pre">'a';</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><p>This is a sequence of characters and so is a compound type,
but can be notated and treated pretty much like a basic
type in C0 (warning: not in C though).</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">string</span> <span class="pre">s</span> <span class="pre">=</span> <span class="pre">&quot;hello</span> <span class="pre">world&quot;</span></code></p></td>
</tr>
</tbody>
</table>
<div class="section" id="structures">
<h2>Structures<a class="headerlink" href="#structures" title="Permalink to this headline">¶</a></h2>
<p>When we wrote the <code class="docutils literal notranslate"><span class="pre">pow_iter</span></code> function in python, we made an ad hoc
collection of three values into a “tuple” as shown below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">pow_iter</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span><span class="n">y1</span><span class="p">,</span><span class="n">r1</span><span class="p">):</span>
    <span class="p">(</span><span class="n">x2</span><span class="p">,</span><span class="n">y2</span><span class="p">,</span><span class="n">r2</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="n">x1</span><span class="o">*</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="o">//</span><span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="n">r1</span> <span class="o">*</span> <span class="n">x1</span> <span class="k">if</span> <span class="n">y1</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="n">r1</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">x2</span><span class="p">,</span><span class="n">y2</span><span class="p">,</span><span class="n">r2</span>
</pre></div>
</div>
<p>That’s not something which is very conveniently expressed in C0.  We need to
step a little lower and make such a collection of values and their meanings
explicit. It is done using what’s called a <strong>struct</strong> - short for “structure”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">struct</span> <span class="n">PowState</span> <span class="p">{</span>
    <span class="nb">int</span> <span class="n">x</span><span class="p">;</span>
    <span class="nb">int</span> <span class="n">y</span><span class="p">;</span>
    <span class="nb">int</span> <span class="n">r</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>The above code declares a structure named <code class="docutils literal notranslate"><span class="pre">PowState</span></code> which has three “fields”
named <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code> and <code class="docutils literal notranslate"><span class="pre">r</span></code>. This kind of a declaration tells C0 that when
we refer to <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">PowState</span></code>, we’re talking about a group of three <code class="docutils literal notranslate"><span class="pre">int</span></code>
values. To understand this better, let’s go back to our spreadsheet interpretation
where each column is given to a specific variable and each row to its value at
a given “time step” in the function’s execution. This gets interesting if we now
number the columns of our sheet like shown below –</p>
<table class="table">
<colgroup>
<col style="width: 19%" />
<col style="width: 13%" />
<col style="width: 13%" />
<col style="width: 13%" />
<col style="width: 13%" />
<col style="width: 13%" />
<col style="width: 19%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>…</p></th>
<th class="head"><p>23</p></th>
<th class="head"><p>24</p></th>
<th class="head"><p>25</p></th>
<th class="head"><p>26</p></th>
<th class="head"><p>27</p></th>
<th class="head"><p>…</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>…</p></td>
<td><p>x</p></td>
<td><p>y</p></td>
<td><p>r</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>…</p></td>
<td><p>10</p></td>
<td><p>15</p></td>
<td><p>1</p></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="indirection">
<h2>Indirection<a class="headerlink" href="#indirection" title="Permalink to this headline">¶</a></h2>
<p>We can do something interesting once we have numbered columns. We can store the
number of a column in one of the variables and introduce a new operation –
<code class="docutils literal notranslate"><span class="pre">fetch</span> <span class="pre">the</span> <span class="pre">value</span> <span class="pre">on</span> <span class="pre">the</span> <span class="pre">column</span> <span class="pre">whose</span> <span class="pre">number</span> <span class="pre">is</span> <span class="pre">given</span> <span class="pre">by</span> <span class="pre">the</span> <span class="pre">value</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">given</span>
<span class="pre">variable</span></code>. We use the words “indirection” or “lookup” for this operation.</p>
<table class="table">
<colgroup>
<col style="width: 19%" />
<col style="width: 13%" />
<col style="width: 13%" />
<col style="width: 13%" />
<col style="width: 13%" />
<col style="width: 13%" />
<col style="width: 19%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>…</p></th>
<th class="head"><p>23</p></th>
<th class="head"><p>24</p></th>
<th class="head"><p>25</p></th>
<th class="head"><p>26</p></th>
<th class="head"><p>27</p></th>
<th class="head"><p>…</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>…</p></td>
<td><p>v</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>…</p></td>
<td><p>25</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">*v</span></code></p></td>
<td></td>
<td></td>
<td><p>42</p></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>If we’re given the above table where the variable <code class="docutils literal notranslate"><span class="pre">v</span></code> has been given the
column numbered <code class="docutils literal notranslate"><span class="pre">23</span></code>, then <code class="docutils literal notranslate"><span class="pre">lookup(v)</span></code> <a class="footnote-reference brackets" href="#notc0" id="id1">1</a> is intended to give the
value <code class="docutils literal notranslate"><span class="pre">42</span></code>. In C0, such a <code class="docutils literal notranslate"><span class="pre">lookup(v)</span></code> operation is written simply <code class="docutils literal notranslate"><span class="pre">*v</span></code>
and the type of <code class="docutils literal notranslate"><span class="pre">v</span></code> is said to be a <code class="docutils literal notranslate"><span class="pre">pointer</span> <span class="pre">to</span> <span class="pre">an</span> <span class="pre">int</span></code> which is notated
as <code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">*v</span></code> when declaring <code class="docutils literal notranslate"><span class="pre">v</span></code>.</p>
<dl class="footnote brackets">
<dt class="label" id="notc0"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>This is not valid C0 syntax.</p>
</dd>
</dl>
<p>… but how do we cause the number <code class="docutils literal notranslate"><span class="pre">25</span></code> to be placed in the column for <code class="docutils literal notranslate"><span class="pre">v</span></code>
in the first place? To do that, we have to see that somehow the system needs
to keep track of free columns and must have the ability to give us the number
of an unoccupied column when we need one. This is the job of the <code class="docutils literal notranslate"><span class="pre">alloc</span></code>
expression. So we can “allocate” a column and store its index in <code class="docutils literal notranslate"><span class="pre">v</span></code>
using a statement like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">int</span> <span class="o">*</span><span class="n">v</span> <span class="o">=</span> <span class="n">alloc</span><span class="p">(</span><span class="nb">int</span><span class="p">);</span>
</pre></div>
</div>
<p>Once we’ve allocated such a column and placed its number in <code class="docutils literal notranslate"><span class="pre">v</span></code>, we can store
value in the column being referred to (a.k.a. “pointed to”) by <code class="docutils literal notranslate"><span class="pre">v</span></code> using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">*</span><span class="n">v</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
</pre></div>
</div>
<p>Here the notation of C0 permits using “lookup(v)” both on the right hand side
of an assignment, as well as the left hand side. When used on the RHS, <code class="docutils literal notranslate"><span class="pre">*v</span></code>
simply fetches the current value in the column pointed to by <code class="docutils literal notranslate"><span class="pre">v</span></code> for use
in any calculation. When used on the LHS, it permits us to modify the value
of the column pointed to by <code class="docutils literal notranslate"><span class="pre">v</span></code>.</p>
</div>
<div class="section" id="pointers-to-structures">
<h2>Pointers to structures<a class="headerlink" href="#pointers-to-structures" title="Permalink to this headline">¶</a></h2>
<p>Since we know structures can be used to group variables (“fields”), we can
imagine a structure to be represented by a group of columns that are intended
to be considered together.</p>
<table class="table">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 17%" />
<col style="width: 15%" />
<col style="width: 15%" />
<col style="width: 15%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>…</p></th>
<th class="head"><p>23</p></th>
<th class="head"><p>24</p></th>
<th class="head"><p>25</p></th>
<th class="head"><p>26</p></th>
<th class="head"><p>27</p></th>
<th class="head"><p>…</p></th>
</tr>
<tr class="row-even"><th class="head"><p>…</p></th>
<th class="head"></th>
<th class="head" colspan="3"><p><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">PowState</span></code></p></th>
<th class="head"></th>
<th class="head"><p>…</p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td><p>…</p></td>
<td><p>s</p></td>
<td><p>x</p></td>
<td><p>y</p></td>
<td><p>r</p></td>
<td></td>
<td><p>…</p></td>
</tr>
<tr class="row-even"><td><p>…</p></td>
<td><p>24</p></td>
<td><p>10</p></td>
<td><p>15</p></td>
<td><p>1</p></td>
<td></td>
<td><p>…</p></td>
</tr>
</tbody>
</table>
<p>In the above table, we’ve used the variable <code class="docutils literal notranslate"><span class="pre">s</span></code> to “point to” a structure.
We can declare that as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">struct</span> <span class="n">PowState</span> <span class="o">*</span><span class="n">s</span><span class="p">;</span>
</pre></div>
</div>
<p>… and to allocate a group of columns and store the column index in <code class="docutils literal notranslate"><span class="pre">s</span></code>,
we use the <code class="docutils literal notranslate"><span class="pre">alloc</span></code> expression as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">struct</span> <span class="n">PowState</span> <span class="o">*</span><span class="n">s</span> <span class="o">=</span> <span class="n">alloc</span><span class="p">(</span><span class="n">struct</span> <span class="n">PowState</span><span class="p">);</span>
</pre></div>
</div>
<p>Assuming <code class="docutils literal notranslate"><span class="pre">s</span></code> now has the index to the column 24, we can refer to the value
of the <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code> and <code class="docutils literal notranslate"><span class="pre">r</span></code> columns using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s</span><span class="o">-&gt;</span><span class="n">x</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="n">s</span><span class="o">-&gt;</span><span class="n">y</span> <span class="o">=</span> <span class="mi">15</span><span class="p">;</span>
<span class="n">s</span><span class="o">-&gt;</span><span class="n">r</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">-&gt;</span></code> operator helps makes use of the information we’ve provided when
declaring the structure to determine which column offset to pick, starting
with the value we have in <code class="docutils literal notranslate"><span class="pre">s</span></code>. We can also use these <code class="docutils literal notranslate"><span class="pre">s-&gt;x</span></code> expressions
on the RHS to calculate things with those values, ex: <code class="docutils literal notranslate"><span class="pre">s-&gt;x</span> <span class="pre">*</span> <span class="pre">s-&gt;y</span></code>.</p>
<p>Given this knowledge, we can now write a version of <code class="docutils literal notranslate"><span class="pre">pow_iter</span></code> in C0
as follows</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">struct</span> <span class="n">PowState</span> <span class="o">*</span> <span class="n">pow_iter</span><span class="p">(</span><span class="n">struct</span> <span class="n">PowState</span> <span class="o">*</span><span class="n">s1</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">struct</span> <span class="n">PowState</span> <span class="o">*</span><span class="n">s2</span> <span class="o">=</span> <span class="n">alloc</span><span class="p">(</span><span class="n">struct</span> <span class="n">PowState</span><span class="p">);</span>

    <span class="n">s2</span><span class="o">-&gt;</span><span class="n">x</span> <span class="o">=</span> <span class="n">s1</span><span class="o">-&gt;</span><span class="n">x</span> <span class="o">*</span> <span class="n">s1</span><span class="o">-&gt;</span><span class="n">x</span><span class="p">;</span>
    <span class="n">s2</span><span class="o">-&gt;</span><span class="n">y</span> <span class="o">=</span> <span class="n">s1</span><span class="o">-&gt;</span><span class="n">y</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">s1</span><span class="o">-&gt;</span><span class="n">y</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">s2</span><span class="o">-&gt;</span><span class="n">r</span> <span class="o">=</span> <span class="n">s1</span><span class="o">-&gt;</span><span class="n">r</span> <span class="o">*</span> <span class="n">s1</span><span class="o">-&gt;</span><span class="n">x</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">s2</span><span class="o">-&gt;</span><span class="n">r</span> <span class="o">=</span> <span class="n">s1</span><span class="o">-&gt;</span><span class="n">r</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">s2</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>We can use the above iterable function in <code class="docutils literal notranslate"><span class="pre">f</span></code> as follows</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">int</span> <span class="n">f</span><span class="p">(</span><span class="nb">int</span> <span class="n">x</span><span class="p">,</span> <span class="nb">int</span> <span class="n">y</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">struct</span> <span class="n">PowState</span> <span class="o">*</span><span class="n">s</span> <span class="o">=</span> <span class="n">alloc</span><span class="p">(</span><span class="n">struct</span> <span class="n">PowState</span><span class="p">);</span>
    <span class="n">s</span><span class="o">-&gt;</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
    <span class="n">s</span><span class="o">-&gt;</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">s</span><span class="o">-&gt;</span><span class="n">y</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">pow_iter</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">s</span><span class="o">-&gt;</span><span class="n">r</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="arrays">
<h2>Arrays<a class="headerlink" href="#arrays" title="Permalink to this headline">¶</a></h2>
<p>While <code class="docutils literal notranslate"><span class="pre">struct``s</span> <span class="pre">let</span> <span class="pre">us</span> <span class="pre">bunch</span> <span class="pre">together</span> <span class="pre">a</span> <span class="pre">number</span> <span class="pre">of</span> <span class="pre">variables,</span> <span class="pre">we</span> <span class="pre">can</span> <span class="pre">only</span>
<span class="pre">collect</span> <span class="pre">together</span> <span class="pre">a</span> <span class="pre">know</span> <span class="pre">number</span> <span class="pre">of</span> <span class="pre">variables.</span> <span class="pre">What</span> <span class="pre">if</span> <span class="pre">we</span> <span class="pre">want</span> <span class="pre">to</span> <span class="pre">collectively</span>
<span class="pre">refer</span> <span class="pre">to</span> <span class="pre">a</span> <span class="pre">collection</span> <span class="pre">of</span> <span class="pre">``N</span></code> integers – called an “array”?</p>
<p>We can handle this notion with the same idea of indirection. If we have in
<code class="docutils literal notranslate"><span class="pre">N</span></code> the number of elements needed, and a “pointer to int” variable <code class="docutils literal notranslate"><span class="pre">a</span></code>, then
if we can allocate a group of <code class="docutils literal notranslate"><span class="pre">N</span></code> columns declared for use as <code class="docutils literal notranslate"><span class="pre">int``s,</span>
<span class="pre">we</span> <span class="pre">can</span> <span class="pre">store</span> <span class="pre">the</span> <span class="pre">index</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">first</span> <span class="pre">column</span> <span class="pre">in</span> <span class="pre">``a</span></code> and extend the notion of
<code class="docutils literal notranslate"><span class="pre">lookup</span></code> to <code class="docutils literal notranslate"><span class="pre">lookup(a,i)</span></code> which would mean “take the column index in variable
<code class="docutils literal notranslate"><span class="pre">a</span></code>, add <code class="docutils literal notranslate"><span class="pre">i</span></code> to it, and pick the value in the column given by that number”.
This is such a common operation that it is simply notated as <code class="docutils literal notranslate"><span class="pre">a[i]</span></code>.</p>
<p>But how do we allocate such a block of columns dependent on <code class="docutils literal notranslate"><span class="pre">N</span></code>? We do that as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">int</span><span class="p">[]</span> <span class="n">a</span> <span class="o">=</span> <span class="n">alloc_array</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">N</span><span class="p">);</span>
</pre></div>
</div>
<p>The type <code class="docutils literal notranslate"><span class="pre">int[]</span></code> is to be read as “array of <code class="docutils literal notranslate"><span class="pre">int``s&quot;.</span> <span class="pre">It</span> <span class="pre">is</span> <span class="pre">useful</span> <span class="pre">to</span> <span class="pre">read</span>
<span class="pre">these</span> <span class="pre">compound</span> <span class="pre">type</span> <span class="pre">declarations</span> <span class="pre">from</span> <span class="pre">right</span> <span class="pre">to</span> <span class="pre">left,</span> <span class="pre">just</span> <span class="pre">as</span> <span class="pre">``int</span> <span class="pre">*</span></code> is
read as “pointer to <code class="docutils literal notranslate"><span class="pre">int</span></code>”.</p>
<p>So each element of this “array” is retrieved using <code class="docutils literal notranslate"><span class="pre">a[i]</span></code>. We can also
use <code class="docutils literal notranslate"><span class="pre">a[i]</span></code> on the LHS to place values into the array columns.</p>
</div>
<div class="section" id="arrays-of-structs">
<h2>Arrays of structs<a class="headerlink" href="#arrays-of-structs" title="Permalink to this headline">¶</a></h2>
<p>How do we interpret the code below?</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">struct</span> <span class="n">Point</span> <span class="p">{</span>
    <span class="nb">int</span> <span class="n">x</span><span class="p">;</span>
    <span class="nb">int</span> <span class="n">y</span><span class="p">;</span>
<span class="p">};</span>

<span class="n">struct</span> <span class="n">Point</span> <span class="p">[]</span> <span class="n">points</span> <span class="o">=</span> <span class="n">alloc_array</span><span class="p">(</span><span class="n">struct</span> <span class="n">Point</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
<span class="o">//</span> <span class="n">Allocate</span> <span class="n">an</span> <span class="n">array</span> <span class="n">of</span> <span class="mi">10</span> <span class="s2">&quot;Point&quot;</span> <span class="n">structures</span><span class="o">.</span>
</pre></div>
</div>
<p>We can then refer to the “y” field of, say, the 6th array item
as – <code class="docutils literal notranslate"><span class="pre">points[5].y</span></code>. <a class="footnote-reference brackets" href="#zeroix" id="id2">2</a></p>
<dl class="footnote brackets">
<dt class="label" id="zeroix"><span class="brackets"><a class="fn-backref" href="#id2">2</a></span></dt>
<dd><p>Arrays are “zero based” – meaning, <code class="docutils literal notranslate"><span class="pre">a[0]</span></code> is the
first element of the array <code class="docutils literal notranslate"><span class="pre">a</span></code>. That makes the index <code class="docutils literal notranslate"><span class="pre">5</span></code>
the 6th element.</p>
</dd>
</dl>
</div>
<div class="section" id="combining-these-concepts">
<h2>Combining these concepts<a class="headerlink" href="#combining-these-concepts" title="Permalink to this headline">¶</a></h2>
<p>We now have <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">bool</span></code>, <code class="docutils literal notranslate"><span class="pre">char</span></code>, <code class="docutils literal notranslate"><span class="pre">string</span></code>,
<code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">XYZ</span></code>, pointer to <code class="docutils literal notranslate"><span class="pre">&lt;type&gt;</span></code> and array of <code class="docutils literal notranslate"><span class="pre">&lt;type&gt;</span></code>.
These are all independent concepts, so we can combine them to create
compound structures such as “pointer to structure that has an int,
an array of chars, and a pointer to another structure”. The below
code declares and initializes such a structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">struct</span> <span class="n">Point</span> <span class="p">{</span>
    <span class="nb">int</span> <span class="n">x</span><span class="p">;</span>
    <span class="nb">int</span> <span class="n">y</span><span class="p">;</span>
<span class="p">};</span>

<span class="n">struct</span> <span class="n">Example</span> <span class="p">{</span>
    <span class="nb">int</span> <span class="n">n</span><span class="p">;</span>
    <span class="n">char</span> <span class="o">*</span><span class="n">chs</span><span class="p">;</span>
    <span class="n">struct</span> <span class="n">Point</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>
<span class="p">};</span>

<span class="n">struct</span> <span class="n">Example</span> <span class="o">*</span><span class="n">ex</span> <span class="o">=</span> <span class="n">alloc</span><span class="p">(</span><span class="n">struct</span> <span class="n">Example</span><span class="p">);</span>
<span class="n">ex</span><span class="o">-&gt;</span><span class="n">n</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="n">ex</span><span class="o">-&gt;</span><span class="n">chs</span> <span class="o">=</span> <span class="n">alloc_array</span><span class="p">(</span><span class="n">char</span><span class="p">,</span> <span class="n">ex</span><span class="o">-&gt;</span><span class="n">n</span><span class="p">);</span>
<span class="n">ex</span><span class="o">-&gt;</span><span class="n">p</span> <span class="o">=</span> <span class="n">alloc</span><span class="p">(</span><span class="n">struct</span> <span class="n">Point</span><span class="p">);</span>
</pre></div>
</div>
<p>This ability to combine these is crucial to allow us to define
complex data structures with various properties .. which we’ll
see later on in this course.</p>
</div>
<div class="section" id="typedefs">
<h2>Typedefs<a class="headerlink" href="#typedefs" title="Permalink to this headline">¶</a></h2>
<p>It can get pretty tedious to keep writing <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">Point</span></code> everywhere.
Why can’t we just say <code class="docutils literal notranslate"><span class="pre">Point</span></code> instead? While saying <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">Point</span></code>
does make explicit what <code class="docutils literal notranslate"><span class="pre">Point</span></code> is, we can give <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">Point</span></code>
a new name using a “typedef” as shown below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">typedef</span> <span class="n">struct</span> <span class="n">Point</span> <span class="p">{</span>
    <span class="nb">int</span> <span class="n">x</span><span class="p">;</span>
    <span class="nb">int</span> <span class="n">y</span><span class="p">;</span>
<span class="p">}</span> <span class="n">SPoint</span><span class="p">;</span>
</pre></div>
</div>
<p>Once we do that, we can declare an array of <code class="docutils literal notranslate"><span class="pre">SPoint``s</span> <span class="pre">using</span>
<span class="pre">``SPoint[]</span> <span class="pre">ps</span> <span class="pre">=</span> <span class="pre">alloc_array(SPoint,</span> <span class="pre">10);</span></code> … treating <code class="docutils literal notranslate"><span class="pre">SPoint</span></code>
as a genuine type in its own right.</p>
<p>Since the name <code class="docutils literal notranslate"><span class="pre">Point</span></code> is no longer relevant in the above
<code class="docutils literal notranslate"><span class="pre">typedef</span></code> declaration, we might as well dispense with it
and write:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">typedef</span> <span class="n">struct</span> <span class="p">{</span>
    <span class="nb">int</span> <span class="n">x</span><span class="p">;</span>
    <span class="nb">int</span> <span class="n">y</span><span class="p">;</span>
<span class="p">}</span> <span class="n">Point</span><span class="p">;</span>
</pre></div>
</div>
<p>Thereafter, we won’t have to keep saying <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">Point</span></code> when
<code class="docutils literal notranslate"><span class="pre">Point</span></code> will do. In fact, after the above declaration,
<code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">Point</span></code> will cause a compilation error!</p>
</div>
</div>


              </div>
              
        
            



<div class='prev-next-bottom'>
    
    <div id="prev">
        <a class="left-prev" href="reasoning.html" title="previous page">
            <i class="prevnext-label fas fa-angle-left"></i>
            <div class="prevnext-info">
                <p class="prevnext-label">previous</p>
                <p class="prevnext-title">Reasoning with imperative programs</p>
            </div>
        </a>
    </div>
     <div id="next">
        <a class="right-next" href="arrays.html" title="next page">
            <div class="prevnext-info">
                <p class="prevnext-label">next</p>
                <p class="prevnext-title">Arrays</p>
            </div>
            <i class="prevnext-label fas fa-angle-right"></i>
        </a>
     </div>

</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Srikumar K. S.<br/>
        
            &copy; Copyright 2021, Srikumar K. S..<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>