
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Searching &#8212; Principles of programming I: Imperative computation (forever alpha) documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=eba8b062" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=f81aabf2"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'searching';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Sorting - an information theoretic introduction" href="sorting.html" />
    <link rel="prev" title="Practice problems" href="practice.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
  
    <p class="title logo__title">Principles of programming I: Imperative computation (forever alpha) documentation</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="welcome.html">Welcome</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction to imperative computation</a></li>
<li class="toctree-l1"><a class="reference internal" href="warmup.html">Warming up with the power function</a></li>
<li class="toctree-l1"><a class="reference internal" href="reasoning.html">Reasoning with imperative programs</a></li>
<li class="toctree-l1"><a class="reference internal" href="c0.html">More C0</a></li>
<li class="toctree-l1"><a class="reference internal" href="arrays.html">Arrays</a></li>
<li class="toctree-l1"><a class="reference internal" href="gcd.html">Assignment 1: GCD</a></li>
<li class="toctree-l1"><a class="reference internal" href="practice.html">Practice problems</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Searching</a></li>
<li class="toctree-l1"><a class="reference internal" href="sorting.html">Sorting - an information theoretic introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="binsearch.html">Binary search</a></li>
<li class="toctree-l1"><a class="reference internal" href="avl.html">AVL trees</a></li>
<li class="toctree-l1"><a class="reference internal" href="lists.html">Linked lists</a></li>
<li class="toctree-l1"><a class="reference internal" href="c.html">Transitioning to C</a></li>
<li class="toctree-l1"><a class="reference internal" href="dict.html">Dictionaries and associated data structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="bitset.html">Bit sets</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/searching.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Searching</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#preliminaries">Preliminaries</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#linear-search-over-an-unsorted-array">Linear search over an unsorted array</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#linear-search-over-a-sorted-array">Linear search over a sorted array</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#binary-searching-a-sorted-array">Binary searching a sorted array</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="searching">
<h1>Searching<a class="headerlink" href="#searching" title="Link to this heading">#</a></h1>
<p>Having introduced arrays as a representation for storing and manipulating
sequences of values, we now venture into some common algorithms using arrays -
searching and sorting.</p>
<section id="preliminaries">
<h2>Preliminaries<a class="headerlink" href="#preliminaries" title="Link to this heading">#</a></h2>
<p>When working with collection types like arrays and structures, it is useful to
create a number of utility functions for producing some instances of these
structures so that we can test our algorithms on them. We’ll start with
making a random array of length <code class="docutils literal notranslate"><span class="pre">n</span></code>. This is itself instructive in that
we’ll be making a small “library” that can be reused in our programs.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">rand</span></code> library provided by C0 (see <a class="reference external" href="http://w.twelf.org/doc/c0-libraries.pdf">c0-libraries.pdf</a>)  gives us
the facility we need to make random numbers that we can use to make
random arrays. This library provides two functions</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rand_t</span> <span class="n">init_rand</span><span class="p">(</span><span class="nb">int</span> <span class="n">seed</span><span class="p">);</span>
<span class="nb">int</span> <span class="n">rand</span><span class="p">(</span><span class="n">rand_t</span><span class="p">);</span>
</pre></div>
</div>
<p>The first function creates a structure that will hold the state of our
random number generator. This is a “pseudo” random number generator, meaning
it produces a sequence based on a purely determinstic process, just that the
sequence “looks random” to someone who doesn’t know the innards of the
algorithm. This is often sufficient for most purposes. The <code class="docutils literal notranslate"><span class="pre">seed</span></code> parameter
is any number of your choice and is used to determine which of the possible
sequences will be produced subsequently. You can choose a seed based on the
current time, for example, to make the sequence quite unpredictable, or you
can fix the seed because you’re debugging your program and you want total
predictability of the sequence. Completely your choice.</p>
<p>Every time we call the <code class="docutils literal notranslate"><span class="pre">rand</span></code> function, passing it the <code class="docutils literal notranslate"><span class="pre">rand_t</span></code> structure
created by <code class="docutils literal notranslate"><span class="pre">init_rand</span></code>, <code class="docutils literal notranslate"><span class="pre">rand</span></code> will produce the next number in the sequence
and store an updated state inside <code class="docutils literal notranslate"><span class="pre">rand_t</span></code>. The details of <code class="docutils literal notranslate"><span class="pre">rand_t</span></code> and how
it is implemented are not relevant for our purpose currently, but this library
is indicative of how to structure such a utility and expose only “how to use it”
without exposing “how it is made”. This abstraction principle underlies pretty
much all of programming activity.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">rand</span></code> function produces a random integer, spanning the full range of
integers. If you look at the contracts for <code class="docutils literal notranslate"><span class="pre">rand</span></code>, you see that there is no
<code class="docutils literal notranslate"><span class="pre">&#64;ensures</span></code> contract on the result, meaning the result can be any valid C0
integer. This indicates one logistical problem with contracts - you cannot
distinguish between “there are no constraints on the result” and “the library
author forgot to specify constraints on the result”. We’ll live with this
and supplement it with tests for now.</p>
<p>Place the following code in a separate file named <code class="docutils literal notranslate"><span class="pre">myutils.c0</span></code>.</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="cp">#use &lt;rand&gt;</span>

<span class="c1">// This function makes an array of ``n`` random numbers in the range</span>
<span class="c1">// [range_start, range_end] which includes both ends of the range.</span>
<span class="c1">// The given random number sequence generator is used.</span>
<span class="kt">int</span><span class="p">[]</span><span class="w"> </span><span class="n">make_random_array</span><span class="p">(</span><span class="n">rand_t</span><span class="w"> </span><span class="n">gen</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">range_start</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">range_end</span><span class="p">)</span>
<span class="c1">//@requires gen != NULL &amp;&amp; n &gt; 0 &amp;&amp; range_end &gt;= range_start;</span>
<span class="c1">//@ensures \length(\result) == n;</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="p">[]</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">alloc_array</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Since n is used here, and alloc_array constrains n to be &gt; 0,</span>
<span class="w">    </span><span class="c1">// it also becomes part of the outer function&#39;s preconditions.</span>

<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">mod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">range_end</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">range_start</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">    </span><span class="c1">//@loop_invariant i &gt;= 0;</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">range_start</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">((</span><span class="n">rand</span><span class="p">(</span><span class="n">gen</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">mod</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">mod</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now, you can use this “library function” in another file “test.c0” as follows</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#use &quot;myutils.c0&quot;</span>
<span class="c1">#use &lt;rand&gt;</span>
<span class="c1">#use &lt;conio&gt;</span>

<span class="nb">bool</span> <span class="n">test_array</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">rand_t</span> <span class="n">gen</span> <span class="o">=</span> <span class="n">init_rand</span><span class="p">(</span><span class="mi">123</span><span class="p">);</span>
    <span class="nb">int</span> <span class="p">[]</span> <span class="n">a</span> <span class="o">=</span> <span class="n">make_random_array</span><span class="p">(</span><span class="n">gen</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="nb">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">printint</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">);</span>
        <span class="n">flush</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">true</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now, you can do <code class="docutils literal notranslate"><span class="pre">coin</span> <span class="pre">-d</span> <span class="pre">test.c0</span></code> and try out your new random array making
function by typing <code class="docutils literal notranslate"><span class="pre">test_array();</span></code> on <code class="docutils literal notranslate"><span class="pre">coin</span></code>’s prompt. Note that every time
you run <code class="docutils literal notranslate"><span class="pre">test_array();</span></code>, you get the same set of numbers printed out. This
is because we use the same seed inside <code class="docutils literal notranslate"><span class="pre">test_array()</span></code>. Modify <code class="docutils literal notranslate"><span class="pre">test_array</span></code>
to take the seed as an argument. Now try different seed values.</p>
<div class="admonition-exercise admonition">
<p class="admonition-title"><strong>Exercise</strong></p>
<p>Go forth and make your own library functions! You can keep building your
own library for use in your assignments and submit them alongside too.</p>
</div>
</section>
<section id="linear-search-over-an-unsorted-array">
<h2>Linear search over an unsorted array<a class="headerlink" href="#linear-search-over-an-unsorted-array" title="Link to this heading">#</a></h2>
<p>Functions that work with arrays can make assumptions about them in order to
gain efficiencies where possible, but usually also need to make some provision
for when those assumptions are broken. So the first order of business is to
be able to do things with unsorted arrays. We already took the first step
by making an unsorted array of random numbers. So let’s find whether a given
integer is present in an array and then use our random array maker function
to test it.</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="c1">// We first write a function that can test whether a given</span>
<span class="c1">// element is in a range, without telling us where it was found.</span>
<span class="c1">// This is slightly simpler than the ``linear_search`` function below.</span>
<span class="kt">bool</span><span class="w"> </span><span class="nf">is_in_range</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="p">[]</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">start_index</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">end_index</span><span class="p">)</span>
<span class="c1">//@requires a != NULL;</span>
<span class="c1">//@requires start_index &gt;= 0 &amp;&amp; end_index &gt;= start_index &amp;&amp; end_index &lt;= \length(a);</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">start_index</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">end_index</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">start_index</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">start_index</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">is_in_range</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">start_index</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">end_index</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Our unsorted linear search function is expected to return the index</span>
<span class="c1">// at which the given value is found in the array, or -1 if the given</span>
<span class="c1">// value is not present in the array. We search the range of indices</span>
<span class="c1">// from start_index up to but not including end_index.</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">linear_search</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="p">[]</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">start_index</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">end_index</span><span class="p">)</span>
<span class="c1">//@requires a != NULL;</span>
<span class="c1">//@requires start_index &gt;= 0 &amp;&amp; end_index &gt;= start_index &amp;&amp; end_index &lt;= \length(a);</span>
<span class="c1">//@ensures \result == -1 || (\result &gt;= 0 &amp;&amp; \result &lt; \length(a) &amp;&amp; a[\result] == x);</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">start_index</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">end_index</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">    </span><span class="c1">//@loop_invariant i &gt;= start_index;</span>
<span class="w">    </span><span class="c1">//@loop_invariant i == start_index || !is_in_range(a, x, start_index, i)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition-exercise admonition">
<p class="admonition-title"><strong>Exercise</strong></p>
<p>Rewrite the functions in this section using recursion instead of a loop.
What can you say about the correctness of the resulting function?</p>
</div>
<div class="admonition-exercise admonition">
<p class="admonition-title"><strong>Exercise</strong></p>
<p>Modify the above <code class="docutils literal notranslate"><span class="pre">linear_search</span></code> function so that it returns a structure
containing two values - one being the result index and the other being the
number of times the function went through the loop to find the value.. or not.</p>
</div>
</section>
<section id="linear-search-over-a-sorted-array">
<h2>Linear search over a sorted array<a class="headerlink" href="#linear-search-over-a-sorted-array" title="Link to this heading">#</a></h2>
<p>What can we do differently if we can assume that we have a sorted array (say in
ascending order)? First we need to develop the notion of what a “sorted array”
is, so we can test for it in the preconditions.</p>
<p>Mathematically speaking, an array <span class="math notranslate nohighlight">\(a\)</span> of <span class="math notranslate nohighlight">\(n\)</span> elements is said to be
sorted if we have a binary relation <span class="math notranslate nohighlight">\(&lt;\)</span> using which we can compare the
elements of the array, and for every pair of integers <span class="math notranslate nohighlight">\((i,j)\)</span> such that
<span class="math notranslate nohighlight">\(0 &lt;= i &lt; n \text{ and } 0 &lt;= j &lt; n\)</span>, <span class="math notranslate nohighlight">\(i \le j \Leftrightarrow a[i] \le a[j]\)</span>.</p>
<p>To make this notion easy to compute, we can infer that that description is
equivalent to requiring that <span class="math notranslate nohighlight">\(a[i] \le a[i+1]\)</span> for all <span class="math notranslate nohighlight">\(1 \le i+1 &lt; n\)</span>.
We can express that in a test function as follows</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">bool</span> <span class="n">is_sorted</span><span class="p">(</span><span class="nb">int</span> <span class="p">[]</span><span class="n">a</span><span class="p">,</span> <span class="nb">int</span> <span class="n">start_index</span><span class="p">,</span> <span class="nb">int</span> <span class="n">end_index</span><span class="p">)</span>
<span class="o">//</span><span class="nd">@requires</span> <span class="n">a</span> <span class="o">!=</span> <span class="n">NULL</span><span class="p">;</span>
<span class="o">//</span><span class="nd">@requires</span> <span class="n">start_index</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">start_index</span> <span class="o">&lt;=</span> <span class="n">end_index</span> <span class="o">&amp;&amp;</span> <span class="n">end_index</span> <span class="o">&lt;=</span> \<span class="n">length</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">start_index</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="n">end_index</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">false</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">is_sorted</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">start_index</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">end_index</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">true</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Given the test function above, we can write our linear search over a sorted
array as</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">int</span> <span class="n">linear_search</span><span class="p">(</span><span class="nb">int</span> <span class="p">[]</span><span class="n">a</span><span class="p">,</span> <span class="nb">int</span> <span class="n">x</span><span class="p">,</span> <span class="nb">int</span> <span class="n">start_index</span><span class="p">,</span> <span class="nb">int</span> <span class="n">end_index</span><span class="p">)</span>
<span class="o">//</span><span class="nd">@requires</span> <span class="n">is_sorted</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">start_index</span><span class="p">,</span> <span class="n">end_index</span><span class="p">);</span>
<span class="o">//</span><span class="nd">@requires</span> <span class="n">start_index</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">start_index</span> <span class="o">&lt;=</span> <span class="n">end_index</span> <span class="o">&amp;&amp;</span> <span class="n">end_index</span> <span class="o">&lt;</span> \<span class="n">length</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
<span class="o">//</span><span class="nd">@ensures</span> \<span class="n">result</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="o">||</span> <span class="p">(</span>\<span class="n">result</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> \<span class="n">result</span> <span class="o">&lt;</span> \<span class="n">length</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">a</span><span class="p">[</span>\<span class="n">result</span><span class="p">]</span> <span class="o">==</span> <span class="n">x</span><span class="p">);</span>
<span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="nb">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">start_index</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">end_index</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
    <span class="o">//</span><span class="nd">@loop_invariant</span> <span class="n">i</span> <span class="o">==</span> <span class="n">start_index</span> <span class="o">||</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">x</span><span class="p">;</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">i</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Notice how we can slightly improve the situation by testing whether <code class="docutils literal notranslate"><span class="pre">a[i]</span> <span class="pre">&gt;</span>
<span class="pre">x</span></code>. If that happens to be true, then because the array is sorted, we know that
every other element of <code class="docutils literal notranslate"><span class="pre">a</span></code> that we’ll examine after index <code class="docutils literal notranslate"><span class="pre">i</span></code> will also
satisfy <code class="docutils literal notranslate"><span class="pre">a[i]</span> <span class="pre">&gt;</span> <span class="pre">x</span></code> and therefore we can abort the search immediately.</p>
<div class="admonition-exercise admonition">
<p class="admonition-title"><strong>Exercise</strong></p>
<p>Explain the <code class="docutils literal notranslate"><span class="pre">&#64;ensures</span></code> expression and show how it expresses correctly
the requirements of <code class="docutils literal notranslate"><span class="pre">linear_search</span></code>. In particular, explain how all parts
of the expression are evaluated such that no safety conditions are violated.</p>
</div>
<div class="admonition-exercise admonition">
<p class="admonition-title"><strong>Exercise</strong></p>
<p>Prove the safety and correctness properties of the above <code class="docutils literal notranslate"><span class="pre">linear_search</span></code>
function. Partial hint: Show that the <code class="docutils literal notranslate"><span class="pre">&#64;loop_invariant</span></code> helps establish
the correctness.</p>
</div>
<div class="admonition-exercise admonition">
<p class="admonition-title"><strong>Exercise</strong></p>
<p>Rewrite the <code class="docutils literal notranslate"><span class="pre">is_sorted</span></code> function to use an approach where we declare
the given range to be sorted if the first half and the second half of the
range are both sorted and the last item of the first half is less than
or equal to the first item of the second half. Is this approach “better”
in any way?</p>
</div>
<div class="admonition-exercise admonition">
<p class="admonition-title"><strong>Exercise</strong></p>
<p>Rewrite the <code class="docutils literal notranslate"><span class="pre">linear_search</span></code> to return, as in an earlier exercise, a structure
containing two values - the found index (which can be -1 if not found), and
the number of times the loop was entered.</p>
</div>
<div class="admonition-exercise admonition">
<p class="admonition-title"><strong>Exercise</strong></p>
<p>What can you learn about the structure of the <code class="docutils literal notranslate"><span class="pre">linear_search</span></code> function if
you rewrite it using recursion instead of a loop?</p>
</div>
</section>
<section id="binary-searching-a-sorted-array">
<h2>Binary searching a sorted array<a class="headerlink" href="#binary-searching-a-sorted-array" title="Link to this heading">#</a></h2>
<p>The latest <code class="docutils literal notranslate"><span class="pre">linear_search</span></code> function reduces the search range by one element
each time the loop is entered. We can exploit the sortedness of the array
quite a bit more than that - the observation is that if the given <code class="docutils literal notranslate"><span class="pre">x</span></code> is
less than the value in the middle of the array, we don’t need to bother searching
the second half. Similarly if it is greater than the middle value of the array,
we don’t need to bother searching the first half.</p>
<div class="admonition-exercise admonition">
<p class="admonition-title"><strong>Exercise</strong></p>
<p>Write a <code class="docutils literal notranslate"><span class="pre">binary_search</span></code> function using recursion that works using the
observation described, along with its contracts and prove its safety and
correctness. What can you say about this function relative to linear
search over a sorted array?</p>
</div>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="practice.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Practice problems</p>
      </div>
    </a>
    <a class="right-next"
       href="sorting.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Sorting - an information theoretic introduction</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#preliminaries">Preliminaries</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#linear-search-over-an-unsorted-array">Linear search over an unsorted array</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#linear-search-over-a-sorted-array">Linear search over a sorted array</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#binary-searching-a-sorted-array">Binary searching a sorted array</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Srikumar K. S.
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2021, Srikumar K. S..
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>